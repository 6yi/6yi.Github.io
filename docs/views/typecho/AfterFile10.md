---
title: Go fmt包读取输入字符串的空格问题
date: 2020-01-27 05:21:00
categories: Go
urlname: 146
tags:
---
<!--markdown-->### &emsp;&emsp;众所周知,java或者python和一些其它语言中,官方的输入函数一般都支持读取一整行输入,例如Scanner的Nextline(),可以直接读取一整行字符串,如&emsp;"asdasd??asdasd?asdasd"&emsp;,而Go的官方包fmt却是与C语言的scanf设计类似,以空格或者回车来判断输入是否完成,所以就导致了输入:&emsp;"asd??asd?asd"&emsp;只获取到了"asd",剩下的全在缓冲区,私认为这个设计很屎,虽然到后期需要用到输入的情况很少很少
### ?&emsp;&emsp;想要获得在其它语言上的体验,我们得改造一下官方的包,其实无非就是在流上操作,而官方针对不同的平台以及安全上做了很多操作,我们自己编写的函数只需要输入流完整的获取全部输入二进制,再将他直接转成String类型,其它语言也是这么操作的,但是Go官方确没有这个实现,我们自己实现的函数性能上肯定比官方强上不少,毕竟没做各种安全检查,但是能基本满足我的需求
```go
//这是官方fmt.scanln实现代码,以换行或者空格来判断输入是否完成
func?(s?*ss)?doScan(a?[]interface{})?(numProcessed?int,?err?error)?{
????defer?errorHandler(&err)
????for?_,?arg?:=?range?a?{
????????s.scanOne('v',?arg)
????????numProcessed++
????}
????if?s.nlIsEnd?{
????????for?{
????????????r?:=?s.getRune()
????????????if?r?==?'\n'?||?r?==?eof?{
????????????????break
????????????}
????????????if?!isSpace(r)?{
????????????????s.errorString("expected?newline")
????????????????break
????????????}
????????}
????}
????return
}
```
我们简单改造的
```go
func?Scanf(a?*string)?{
????//打开系统的输入流
????reader?:=?bufio.NewReader(os.Stdin)
????//读取一整行二进制数据
????data,?_,?_?:=?reader.ReadLine()
????//转化为字符串
????*a?=?string(data)
}
```
### ?这样我们就可以直接调用scanf(&strs)函数对strs进行输入了

